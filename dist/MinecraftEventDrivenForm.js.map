{"version":3,"file":"MinecraftEventDrivenForm.js","sources":["../node_modules/@mine-scripters/minecraft-event-driven-form-base/dist/MinecraftEventDrivenForm.js","../../src/FormLoop.ts"],"sourcesContent":["class FormError extends Error {\n    constructor(msg) {\n        super(msg);\n    }\n}\nclass FormArgumentError extends FormError {\n    path;\n    step;\n    current;\n    constructor(path, step, current) {\n        super(`Invalid path: ${path} at step: ${step} in object: ${JSON.stringify(current)}`);\n        this.path = path;\n        this.step = step;\n        this.current = current;\n    }\n}\n\nclass FormArguments {\n    _args = {};\n    set(name, arg) {\n        this._args[name] = arg;\n    }\n    setAll(args) {\n        this._args = {\n            ...this._args,\n            ...args,\n        };\n    }\n    getAll() {\n        return this._args;\n    }\n    get(name) {\n        return this._args[name];\n    }\n    resolvePath(path) {\n        let current = this._args;\n        const splitPath = path.split('.');\n        for (const step of splitPath) {\n            if (typeof current === 'object' && step in current) {\n                current = current[step];\n            }\n            else {\n                throw new FormArgumentError(path, step, current);\n            }\n        }\n        return current;\n    }\n    resolveTemplate(template) {\n        return template.replace(/\\{\\s*([^}\\s]+)\\s*\\}/g, (_, p1) => {\n            return this.resolvePath(p1).toString();\n        });\n    }\n    normalize(content) {\n        if (typeof content === 'string') {\n            return {\n                type: 'text',\n                text: this.resolveTemplate(content),\n            };\n        }\n        else if (Array.isArray(content)) {\n            return {\n                type: 'array',\n                array: content.map((c) => this.normalize(c)),\n            };\n        }\n        else {\n            return {\n                type: 'translate',\n                translate: this.resolveTemplate(content.translate),\n                args: content.args ? content.args.map((a) => this.normalize(a)) : undefined,\n            };\n        }\n    }\n}\n\nclass FormEventProducer {\n    _hub;\n    _formAction;\n    _args;\n    static fromFormHub(hub) {\n        if (typeof hub.entrypoint === 'string') {\n            return new FormEventProducer(hub, {\n                form: hub.entrypoint,\n            });\n        }\n        else {\n            return new FormEventProducer(hub, {\n                form: hub.entrypoint.form,\n                event: hub.entrypoint.events,\n                eventArgs: hub.entrypoint.eventArgs,\n                setArgs: hub.entrypoint.initialArgs,\n            });\n        }\n    }\n    constructor(hub, formAction, previousArgs) {\n        this._hub = hub;\n        this._formAction = formAction;\n        this._args = new FormArguments();\n        if (this._formAction?.copyArgs && previousArgs) {\n            this._args.setAll(previousArgs.getAll());\n        }\n        if (this._formAction?.setArgs) {\n            this._args.setAll(this._formAction.setArgs);\n        }\n    }\n    get args() {\n        return this._args;\n    }\n    getInitialForm() {\n        return this._formAction?.form ? this._hub.forms[this._formAction.form] : undefined;\n    }\n    *iterator() {\n        if (this._formAction) {\n            if (!this._formAction.event) {\n                yield new FormEvent(this._hub, undefined, this._args);\n            }\n            else if (typeof this._formAction.event === 'string') {\n                yield new FormEvent(this._hub, {\n                    event: this._formAction.event,\n                    args: this._formAction.eventArgs,\n                }, this._args);\n            }\n            else {\n                for (const event of this._formAction.event) {\n                    yield new FormEvent(this._hub, {\n                        event: event.event,\n                        args: event.args ?? this._formAction.eventArgs,\n                    }, this._args);\n                }\n            }\n        }\n    }\n}\nclass FormEvent {\n    _form = undefined;\n    _name = undefined;\n    _continueProcessing = true;\n    _hub;\n    _args;\n    _eventArgs = [];\n    constructor(hub, eventAction, args) {\n        this._hub = hub;\n        this._args = args;\n        if (eventAction) {\n            this._name = eventAction.event;\n            if (eventAction.args) {\n                this._eventArgs = eventAction.args;\n            }\n        }\n    }\n    loadForm(name, type) {\n        if (name in this._hub.forms) {\n            const form = this._hub.forms[name];\n            if (type && form.type !== type) {\n                throw new FormError(`Invalid type ${type} for form named ${name}. The actual type is ${form.type}`);\n            }\n            return JSON.parse(JSON.stringify(form));\n        }\n        throw new FormError(`Unknown form named ${name}`);\n    }\n    set form(form) {\n        this._form = form;\n    }\n    get form() {\n        return this._form;\n    }\n    get name() {\n        return this._name;\n    }\n    get args() {\n        return this._args;\n    }\n    get eventArgs() {\n        return this._eventArgs;\n    }\n    get continueProcessing() {\n        return this._continueProcessing;\n    }\n    cancelProcessing() {\n        this._continueProcessing = false;\n    }\n}\nconst triggerEvent = async (eventProducer, receiver) => {\n    let form = eventProducer.getInitialForm();\n    if (receiver) {\n        for (const event of eventProducer.iterator()) {\n            event.form = form;\n            if (event.name) {\n                if (typeof receiver === 'function') {\n                    await receiver(event);\n                }\n                else if (event.name in receiver) {\n                    await receiver[event.name](event);\n                }\n            }\n            form = event.form;\n            if (!event.continueProcessing) {\n                break;\n            }\n        }\n    }\n    return form;\n};\n\nconst _ = (value, ...args) => ({\n    translate: value,\n    args: args.length > 0 ? args : undefined,\n});\n\nexport { FormArgumentError, FormArguments, FormError, FormEvent, FormEventProducer, _, triggerEvent };\n//# sourceMappingURL=MinecraftEventDrivenForm.js.map\n",null],"names":[],"mappings":"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","x_google_ignoreList":[0]}